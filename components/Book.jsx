import React, { useCallback, useRef, useState } from "react";
import classNames from "classnames";
import style from "../styles/book.module.scss";
import DoublePage from "./DoublePage";
import Cover from "./Cover";
import GetBookPage from "./helper/GetBookPage";
import HTMLFlipBook from "react-pageflip";
import LeftPage from "./LeftPage";
import RightPage from "./RightPage";
import Image from "next/image";
import Bookmarks from "./Bookmarks";

const Book = ({
  pages,
  bookmarks,
  currentPage,
  zIndexPage,
  changePage,
  changeCustomPage,
  bookRef,
}) => {
  const [qaIndex, setQaIndex] = useState(0);
  const pageFlipRef = useRef(null);
  const [activePage, setActivePage] = useState(null);

  const onFlip = useCallback((e) => {
    setActivePage(e.data);
  }, []);

  return (
    <div
      style={{
        width: "calc(132 * var(--vh))",
        height: "calc(220 * var(--vh))",
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
      }}
    >
      <HTMLFlipBook
        width={490}
        height={733}
        size={"stretch"}
        maxShadowOpacity={0.5}
        showCover={true}
        mobileScrollSupport={true}
        ref={pageFlipRef}
        onFlip={onFlip}
        style={{
          transform:
            Math.ceil(
              pageFlipRef.current?.pageFlip()?.getCurrentPageIndex() / 2
            ) === 0 || pageFlipRef.current === null
              ? "translateX(-25%)"
              : "translateX(0%)",
          transition: "transform .75s ease-in-out",
        }}
      >
        <Image
          src={"/blackBookCover.webp"}
          alt="book cover"
          placeholder="blur"
          blurDataURL={
            "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDABQODxIPDRQSEBIXFRQYHjIhHhwcHj0sLiQySUBMS0dARkVQWnNiUFVtVkVGZIhlbXd7gYKBTmCNl4x9lnN+gXz/2wBDARUXFx4aHjshITt8U0ZTfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHz/wAARCAR2AyUDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBv/EABQQAQAAAAAAAAAAAAAAAAAAAAD/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A5EAAABUUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAABAAAAEVAAAAAEVAAAAAEVAAAAAAAAAAAAAAAAAFRQAAAAAAAAAAUAAAAAAAAAGgAAAFQBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAEAAAARUAAAAARUAAAAARUAAAAAAAAAAAAAAAAAVFAAAAAAAAAABQAAAAAAAAAaAAAAABRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAQAAABFQAAAABFQAAAABFQAAAAAAAAAAAAAAAAAAFAAAAAAAAABQAAAAAAAAAaAAAAAAABRFAAAAAAAAAAAAAAAAAAAAAAAAAAARUAAAAAAABAAAAAQAAAAABFQAAAABFQAAAAAAAAAAAAAAAAAAFAAAAAAAAABRFAAAAAAAABoAAAAAAABUAUAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAARUAAAABAAAAAAQAAAAABFQAAAAAAAAAAAAAAAAAAFAAAAAAAAAAVFAAAAAAAABoAAAAAAAAABUAUAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAARUAAAABAAAAAAQAAAAAEAAAAAAAAAAAAAAAAAAAAVFAAAAAAAAAABQAAAAAAAaAAAAAAAAAAAAABRFAAAAAAAAAAAAAAAAAAAQAAAAAAAAAQAAABFQAAAAAAEAAAAABAAAAAAAAAAAAAAAAAAAAFQBQAAAAAAAAAFQBQAAAAAaAAAAAAAAAAAAAAABRAFAAAAAAAAAAAAAAQAAAAAAAAAAQAAAABFQAAAABFQAAAAAEAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAFQBQAAAaAAAAAAAAAAAAAAAAAAABRAFEAUQBRAFEAAAAAAAAAAAAAEAAAAAEAAAAAARUAAAAARUAAAAAAAAAAAAAAAAAAAAAAAVFAAAAAAAAAAAAAAAABsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAARUAAAAAABAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAQAAAAAAQAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAVFAAAAAAAAAAAAAABsQBRAFEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAARUAAAAAAAQAAAAAEVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAURQAAAAAAAAAAAAaAAAAAAAAVAFEAUAAAAAAAAAAAAAAAAAAAAAAABAAAAAAABAAAAAAAQAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVAFAAAAAAAAAAABoAAAAAAAAAAAAAFEAURQAAAAAAAAAAAAAABAAAAAAAAABAAAAAAAAQAAAAAEVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFQBQAAAAAAAAAaAAAAAAAAAAAAAAAAAAAAABRAFEAUQAAAAAAAAAAAAAQAAAAAAAAQAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRAFAAAAABVQBRAFEAUQBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAQFQAAAAAAAAAQAAAAABFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFEAUQBoAAAAAAAAAAAFEAURQAAAAAAAAAAAAAAAAAQFEAAAAAAAAAAAEAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoAAAAAAAAAAAAAAAAAAAFEAUQBRAFEAUQAAAAAAAAAAAAAAAQAAAAAAAEAAAAAAAAAAAAAAEBUAAAAABUAURQAAAAAAAAAAAAAAAAAAAAAAAAaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAEVAAAAAAAAAAAAAAQAAAAAAAAAAAAFEUAAAAAAAAAAAAAAAAAAAAAAGhAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAQAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAVAFAAAAAAAAAAAAAAAAAAABQAAAAAAAAAUQBRAFEUAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAEAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAABUAUAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAABRAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAURQAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFQBRFAAAAAAAAAAAAAAAABRAFEAUQBRFAAAAAAAAAAAAAAAAAAAAABAUQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUQBRAFEAUQBQAAAAAAAAAAAAAAAAAAAAAFQBRAFEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQFEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBBQEFAQUBFAAAAAAAAAAAAAAAAAAAEFAQUBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARQEFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEUBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAUBBQEFAQAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAUAAAAAAAAAAEFQAAAAAAAAAAAAAAAAAAAAAAEFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAQVAAAAAAAAAAAAAAAAAAAAAEVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAARUAAAAAAAAAAAAAAAAAAAAARUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVFAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAf/9k="
          }
          loader={() => "/blackBookCover.webp"}
          fill
          unoptimized={true}
          style={{ objectFit: "cover" }}
        />

        {pages?.map((page, index) => {
          return [
            <div key={`${page.sys.contentType.sys.id}-left`}>
              <LeftPage
                backgroundImg={`url('${page.fields.backgroundImage[0].fields.file.url}')`}
                content={
                  <GetBookPage
                    id={page.sys.contentType.sys.id}
                    page={page}
                    side="left"
                    changeCustomPage={changeCustomPage}
                    pages={pages}
                    qaIndex={qaIndex}
                    setQaIndex={setQaIndex}
                    pageFlip={pageFlipRef}
                    // showContactFun={showContactFun}
                    // showModalFun={showModalFun}
                    // showVideoFun={showVideoFun}
                  />
                }
                thisPageIndex={index}
              />
            </div>,
            <div key={`${page.sys.contentType.sys.id}-right`}>
              <RightPage
                backgroundImg={`url('${page.fields.backgroundImage[1].fields.file.url}')`}
                content={
                  <GetBookPage
                    id={page.sys.contentType.sys.id}
                    page={page}
                    side="right"
                    changeCustomPage={changeCustomPage}
                    pages={pages}
                    qaIndex={qaIndex}
                    setQaIndex={setQaIndex}
                    pageFlip={pageFlipRef}
                    // showContactFun={showContactFun}
                    // showModalFun={showModalFun}
                    // showVideoFun={showVideoFun}
                  />
                }
                thisPageIndex={index}
              />
            </div>,
          ];
        })}
      </HTMLFlipBook>
      <Bookmarks
        pageFlipRef={pageFlipRef}
        bookmarks={bookmarks}
        pages={pages}
      />
    </div>
  );

  return (
    <div
      className={classNames(style.container)}
      style={{
        transform: currentPage === -1 ? "translateX(-25%)" : "translateX(0%)",
      }}
      ref={bookRef}
    >
      <div className={style.backgroundHolder}></div>

      <Cover
        thisPageIndex={-1}
        currentPage={currentPage}
        pagesLength={pages?.length}
        zIndexPage={zIndexPage}
        changePage={changePage}
      />
      {pages?.map((page, index) => {
        const bookmark = bookmarks?.filter(
          ({ fields: { category } }) =>
            page.fields.category?.toLowerCase() === category?.toLowerCase()
        )[0]?.fields;

        const bookmarkIndex = bookmarks?.findIndex(
          ({ fields }) => fields === bookmark
        );

        return (
          <DoublePage
            key={page.sys.id}
            thisPageIndex={index}
            currentPage={currentPage}
            pagesLength={pages?.length}
            zIndexPage={zIndexPage}
            changePage={changePage}
            changeCustomPage={changeCustomPage}
            page={{ page }}
            bgLeft={`url('${page.fields.backgroundImage[0].fields.file.url}')`}
            bgRight={`url('${page.fields.backgroundImage[1].fields.file.url}')`}
            leftContent={
              <GetBookPage
                id={page.sys.contentType.sys.id}
                side={"left"}
                page={page}
                changeCustomPage={changeCustomPage}
                pages={pages}
                qaIndex={qaIndex}
                setQaIndex={setQaIndex}
              />
            }
            rightContent={
              <GetBookPage
                id={page.sys.contentType.sys.id}
                side={"right"}
                page={page}
                changeCustomPage={changeCustomPage}
                pages={pages}
                qaIndex={qaIndex}
              />
            }
            bookmark={bookmark}
            bookmarkIndex={bookmarkIndex}
          />
        );
      })}
      <Cover
        thisPageIndex={pages?.length}
        currentPage={currentPage}
        pagesLength={pages?.length}
        zIndexPage={zIndexPage}
        changePage={changePage}
      />
    </div>
  );
};

export default Book;
